<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
<head th:replace="fragments/template :: head_input(~{::title})">
	<title>Admin Page</title>
</head>
<body>
<!-- Include _header.html -->
<th:block th:include="/common/_header"></th:block>
<div class="container">
	<div class="row">
		<div class="col-lg">
			<h2>Admin Page</h2>
		</div>
	</div>
	<div class="row">
		<div th:replace="fragments/template :: admin-sidebarmenu"></div>

		<div class="col-lg-9">
			<h3>
				Hello : <span th:utext="${#request.userPrincipal.name}"></span>
			</h3>

			<div th:if="${errorMessage != null}"
			     th:utext="${errorMessage}" class="ui-state-error-text">...
			</div>
			<div th:if="${message != null}"
			     th:utext="${message}" class="alert-info">...
			</div>
			<table>
				<thead>
				<tr>
					<th th:text="No"></th>
					<th th:text="UserName"></th>
					<th th:text="FullName"></th>
					<th th:text="Email"></th>
					<th th:text="Role"></th>
					<th th:text="Action"></th>
				</tr>
				</thead>
				<tbody>
				<tr th:each="user,iterationStatus : ${user_list}">
					<td th:text="${iterationStatus.count}"></td>
					<td><span th:text="${user.userName}"></span></td>
					<td><span th:text="${user.fullName}"></span></td>
					<td><span th:text="${user.email}"></span></td>
					<td><span th:text="${user.role}"></span></td>
					<td>
						<button class="btn_delete" type="button"
						        th:text="Delete"
						        th:id="'btn_delete' + ${iterationStatus.count}"
						        th:onclick="|javascript:deleteUser(${user.id})|"
						        th:if="${user.role ne 'ROLE_ADMIN'}"></button>
						<!--                <script th:inline="javascript">-->
						<!--                    /*<![CDATA[*/-->
						<!--                    $('#btn_delete' + /*[[${iterationStatus.count}]]*/'').click(function () {-->
						<!--                        deleteUser(/*[[${user.id}]]*/'');-->
						<!--                    });-->
						<!--                    /*]]>*/-->
						<!--                </script>-->
					</td>
					<!--            <td>-->
					<!--                <form th:action="@{/admin/delete}" method="post">-->
					<!--                    <input type="hidden" name="userName" th:value="${user.userName}" />-->
					<!--                    <input type="submit" value="Delete" />-->
					<!--                </form>-->
					<!--            </td>-->
				</tr>
				</tbody>
			</table>

			<!--<a th:href="@{/vendor/show/category}">Add product</a>-->
			<!--<a th:href="@{/vendor/product/view/byVendor}">Show all vendor product</a>-->
			<!--<a th:href="@{/showProducts}">Show all product</a>-->

			<!--<a th:href="@{/user}">User Page</a>-->
<!--			<form th:action="@{/j_spring_security_logout}" method="post">-->
<!--				&lt;!&ndash;    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />&ndash;&gt;-->
<!--				<input type="submit" value="Logout"/>-->
<!--			</form>-->
		</div>
	</div>
</div>
<form method="post" th:action="@{/admin}" id="reload"></form>
</body>
<script type="text/javascript" th:src="@{/js/admin/index.js}"></script>
</html>