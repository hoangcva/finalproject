<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
<head th:replace="fragments/template :: head_input(~{::title})">
	<title>Admin Page</title>
</head>
<body>
<!-- Include _header.html -->
<th:block th:include="/common/_header"></th:block>
<main>
	<div class="container-fluid">
		<div class="row">
			<th:block th:include="/common/_admin-sidebar-menu"></th:block>
			<div class="col-lg-8">
				<div class="row mb-4">
					<h3 class="text-lg-left mt-lg-2"></h3>
				</div>
				<div th:replace="fragments/template :: display-error-message"/>
				<table class="table table-bordered" id="dtBasicExample">
					<thead>
					<tr>
						<th scope="col" th:text="No"></th>
						<th scope="col" th:text="UserName"></th>
						<th scope="col" th:text="FullName"></th>
						<th scope="col" th:text="Email"></th>
						<th scope="col" th:text="Role"></th>
						<th scope="col" th:text="Action"></th>
					</tr>
					</thead>
					<tbody>
					<tr th:each="user,iterationStatus : ${user_list}">
						<td th:text="${iterationStatus.count}"></td>
						<td th:unless="${user.role eq 'ROLE_ADMIN'}"><a
								th:href="@{/admin/account/update(userName = ${user.userName})}"><span
								th:text="${user.userName}"></span></a></td>
						<td th:if="${user.role eq 'ROLE_ADMIN'}"><span th:text="${user.userName}"></span></td>
						<td><span th:text="${user.fullName}"></span></td>
						<td><span th:text="${user.email}"></span></td>
						<td><span th:text="${user.role}"></span></td>
						<td>
							<a class="btn_delete btn btn-danger" role="button"
							        th:text="Delete"
							        th:id="'btn_delete' + ${iterationStatus.count}"
							        th:onclick="|javascript:deleteUser(${user.id})|"
							        th:if="${user.role ne 'ROLE_ADMIN'}"></a>
							<!--                <script th:inline="javascript">-->
							<!--                    /*<![CDATA[*/-->
							<!--                    $('#btn_delete' + /*[[${iterationStatus.count}]]*/'').click(function () {-->
							<!--                        deleteUser(/*[[${user.id}]]*/'');-->
							<!--                    });-->
							<!--                    /*]]>*/-->
							<!--                </script>-->
						</td>
						<!--            <td>-->
						<!--                <form th:action="@{/admin/delete}" method="post">-->
						<!--                    <input type="hidden" name="userName" th:value="${user.userName}" />-->
						<!--                    <input type="submit" value="Delete" />-->
						<!--                </form>-->
						<!--            </td>-->
					</tr>
					</tbody>
				</table>

				<!--<a th:href="@{/vendor/show/category}">Add product</a>-->
				<!--<a th:href="@{/vendor/product/view}">Show all vendor product</a>-->
				<!--<a th:href="@{/showProducts}">Show all product</a>-->

				<!--<a th:href="@{/user}">User Page</a>-->
				<!--			<form th:action="@{/j_spring_security_logout}" method="post">-->
				<!--				&lt;!&ndash;    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />&ndash;&gt;-->
				<!--				<input type="submit" value="Logout"/>-->
				<!--			</form>-->
			</div>
		</div>
	</div>
</main>
<th:block th:include="/common/_footer"></th:block>
<form method="post" th:action="@{/admin}" id="reload"></form>
</body>
<script type="text/javascript" th:src="@{/js/admin/index.js}"></script>
</html>