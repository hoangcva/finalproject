<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
<head th:replace="fragments/template :: head_input(~{::title})">
	<title>Vendor page</title>
</head>
<body>
<!-- Include _header.html -->
<th:block th:include="/common/_header"></th:block>
<main>
	<div class="container-fluid">
		<div class="row">
			<th:block th:include="/common/_vendor-sidebar-menu"></th:block>
			<div class="col-lg-8">
				<div class="row mb-4">
					<h3>Statistics</h3>
				</div>
				<div th:replace="fragments/template :: display-error-message"/>
				<div class="row">
					<div class="col-lg-3">
						<p>Today income</p>
						<p class="money" th:text="${vendorStatisticForm.todayIncome}"></p>
					</div>
					<div class="col-lg-3">
						<p>Last 30 days income</p>
						<p class="money" th:text="${vendorStatisticForm.incomeLast30Days}"></p>
					</div>
					<div class="col-lg-3">
						<p>Total income</p>
						<p class="money" th:text="${vendorStatisticForm.totalIncome}"></p>
					</div>
				</div>
				<div class="row">
					<div class="col-lg-12">
						<table class="table table-bordered table-hover" id="dtBasicExample">
							<thead>
							<tr>
								<th scope="col" th:text="'#'"></th>
								<th scope="col" th:text="'Product Name'"></th>
								<th scope="col" th:text="'Quantity Sold'"></th>
								<th scope="col" th:text="'Total'"></th>
							</tr>
							</thead>
							<tbody>
							<tr th:each="product,iterationStatus : ${vendorStatisticForm.statisticDtoList}">
								<td th:text="${iterationStatus.count}"></td>
								<td>
									<div class="d-flex">
										<img class="img-thumbnail mr-2" style="height: 60px"
										     th:src="@{'data:image/jpeg;base64,'
								            +${product.generateBase64Image()}}"/>
										<div>
                                        <span class="text-2-lines">
                                            <a th:text="${product.productName}"
                                               th:href="@{/product/view/detail(productId = ${product.productId}, vendorId = ${vendorForm.vendorId})}"></a>
                                        </span>
										</div>
									</div>
								</td>
								<td>
									<span th:text="${product.buyQuantity}"></span>
								</td>
								<td>
									<span class="money" th:text="${product.productIncome}"></span>
								</td>
							</tr>
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
	</div>
</main>
<th:block th:include="/common/_footer"></th:block>
<!--<a th:href="@{/vendor/product/category}">Add product</a><br>-->
<!--<a th:href="@{/vendor/product/view}">Show all vendor product</a><br>-->
<!--<a th:href="@{/showProducts}">Show all product</a><br>-->
<!--<br/><br/>-->
<!--<form th:action="@{/j_spring_security_logout}" method="post">-->
<!--    &lt;!&ndash;    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />&ndash;&gt;-->
<!--    <input type="submit" value="Logout" />-->
<!--</form>-->
<form method="post" th:action="@{/admin}" id="reload"></form>
</body>
<script type="text/javascript" th:src="@{/js/admin/index.js}"></script>
</html>