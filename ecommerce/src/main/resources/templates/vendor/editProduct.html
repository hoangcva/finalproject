<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/template :: head_input(~{::title})">
	<title>Edit product</title>
</head>
<body>
<th:block th:include="/common/_header"></th:block>
<main>
	<div class="container-fluid">
		<div class="row">
			<th:block th:include="/common/_vendor-sidebar-menu"></th:block>
			<div class="col-lg-8">
				<div class="row mb-4">
					<h3 class="text-lg-left mt-lg-2">Edit Product</h3>
				</div>
				<div th:replace="fragments/template :: display-error-message"/>
				<form th:action="@{/vendor/product/edit}" th:object="${productForm}" th:method="POST" id="save-product-form"
				      enctype="multipart/form-data">
					<div class="container">
						<div th:replace="fragments/template :: detail-product-input"></div>
						<hr class="my-4">
						<div class="image-content container d-inline-flex flex-wrap flex-row">
							<label for="img-manager-section">Add images:</label>
							<div id="img-manager-section" class="d-flex flex-row justify-content-around">
								<div class="img-manager">
									<div class="add-img-box">
										<img class="previous-img img-thumbnail" id="previous-img-1"
										     th:src="@{'data:image/jpeg;base64,'+${productForm.productImageFormList[0].generateBase64Image()}}"
										     th:unless="${#lists.size(productForm.productImageFormList) eq 0}"/>
										<img class="add-img-btn" id="add-img-btn1" th:src="@{/images/add-image.png}"
										     th:classappend="${(#lists.size(productForm.productImageFormList) eq 0) ? '':'hide'}">
										<input class="input-image" id="imageFile1" th:field="*{uploadImage1.uploadFile}"
										       type="file" accept="image/png, image/jpeg"/>
										<img class="img-thumbnail border-0 hide" id="thumbnail1" alt="Product image preview">
										<input type="hidden" id="delete1" name="delete1" th:value="*{uploadImage1.delete}">
									</div>
									<span>Image 1</span>
									<img class="delete-btn-img" id="delete-btn-img1" th:src="@{/images/trash.png}"
									     th:classappend="${(#lists.size(productForm.productImageFormList) eq 0) ? 'hide':''}">
								</div>
								<div class="img-manager">
									<div class="add-img-box">
										<img class="previous-img img-thumbnail" id="previous-img-2"
										     th:src="@{'data:image/jpeg;base64,'+${productForm.productImageFormList[1].generateBase64Image()}}"
										     th:unless="${#lists.size(productForm.productImageFormList) < 2}"/>
										<img class="add-img-btn" id="add-img-btn2" th:src="@{/images/add-image.png}"
										     th:classappend="${(#lists.size(productForm.productImageFormList) < 2) ? '':'hide'}">
										<input class="input-image" id="imageFile2" th:field="*{uploadImage2.uploadFile}" type="file"
										       accept="image/png, image/jpeg"/>
										<img class="img-thumbnail border-0 hide" id="thumbnail2" alt="Product image preview">
										<input type="hidden" id="delete2" name="delete2" th:value="*{delete2}">
									</div>
									<span>Image 2</span>
									<img class="delete-btn-img" id="delete-btn-img2" th:src="@{/images/trash.png}"
									     th:classappend="${(#lists.size(productForm.productImageFormList) < 2) ? 'hide':''}">
								</div>
								<div class="img-manager">
									<div class="add-img-box">
										<img class="previous-img img-thumbnail" id="previous-img-3"
										     th:src="@{'data:image/jpeg;base64,'+${productForm.productImageFormList[2].generateBase64Image()}}"
										     th:unless="${#lists.size(productForm.productImageFormList) < 3}">
										<img class="add-img-btn" id="add-img-btn3" th:src="@{/images/add-image.png}"
										     th:classappend="${(#lists.size(productForm.productImageFormList) < 3) ? '':'hide'}">
										<input class="input-image" id="imageFile3" th:field="*{uploadImage3.uploadFile}" type="file"
										       accept="image/png, image/jpeg"/>
										<img class="img-thumbnail border-0 hide" id="thumbnail3" alt="Product image preview">
										<input type="hidden" id="delete3" name="delete3" th:field="*{uploadImage1.delete}">
									</div>
									<span>Image 3</span>
									<img class="delete-btn-img" id="delete-btn-img3" th:src="@{/images/trash.png}"
									     th:classappend="${(#lists.size(productForm.productImageFormList) < 3) ? 'hide':''}">
								</div>
							</div>
						</div>
						<input type="hidden" name="vendorId" th:field="*{vendorId}">
						<input type="hidden" name="productId" th:field="*{productId}">
						<input type="hidden" name="createdBy" th:field="*{createdBy}">
						<input type="hidden" name="isSubmitted" id="isSubmitted" value="true">
						<button type="submit" class="btn btn-primary btn-save">Save product</button>
					</div>
				</form>
			</div>
		</div>
	</div>
</main>
<th:block th:include="/common/_footer"></th:block>
<script type="text/javascript" th:src="@{/js/vendor/editProduct.js}"></script>
<link rel="stylesheet" href="../../static/css/vendor/editProduct.css" th:href="@{/css/vendor/editProduct.css}"/>
<link rel="stylesheet" href="../../static/css/common/productImage.css" th:href="@{/css/common/productImage.css}"/>
</body>
</html>