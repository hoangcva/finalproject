<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/template :: head_input(~{::title})">
    <title>Edit product</title>
</head>
<body>
<th:block th:include="/common/_header"></th:block>
<h2>Edit Product Detail</h2>

<form th:action="@{/vendor/editProduct}" th:object="${productForm}" th:method="POST" id="save-product-form" enctype="multipart/form-data">
    <div class="container">
        <div class="main-content container" th:if="${productForm.createdBy eq productForm.vendorId}">
            <div th:replace="fragments/template :: category-select-fragment"></div>
            <div class="form-group">
                <label for="productName">Product name:</label>
                <input class="form-control"
                       th:classappend="${(#fields.hasErrors('productName')?'is-invalid':'')
                           + (!#fields.hasErrors('productName') and productForm.isSubmitted() ? 'is-valid':'')}"
                       type="text" id="productName" name="productName" th:field="*{productName}">
                <label class="invalid-feedback" th:if="${#fields.hasErrors('productName')}" th:errors="*{productName}"></label>
            </div>
            <hr class="my-4">
            <div class="form-row">
                <div class="form-group col-3">
                    <label for="brand">Brand:</label>
                    <input class="form-control" type="text" id="brand" name="brand" th:field="*{brand}"
                           th:classappend="${(#fields.hasErrors('brand')?'is-invalid':'')
                               + (!#fields.hasErrors('brand') and productForm.isSubmitted() ? 'is-valid':'')}">
                    <label class="invalid-feedback" th:if="${#fields.hasErrors('brand')}" th:errors="*{brand}"></label>
                </div>
                <div class="form-group col-3">
                    <label for="origin">Origin:</label>
                    <input class="form-control" type="text" id="origin" name="origin" th:field="*{origin}">
                    <!--            <label th:if="${#fields.hasErrors('origin')}" th:errors="*{origin}"></label>-->
                </div>
            </div>
            <div class="form-row">
                <div class="form-group col" th:if="*{categoryId eq 1}">
                    <label for="size">Size:</label>
                    <input class="form-control" type="text" id="size" name="size" th:field="*{size}">
                    <!--            <label th:if="${#fields.hasErrors('size')}" th:errors="*{size}"></label>-->
                </div>
                <div class="form-group col" th:if="*{categoryId eq 1}">
                    <label for="color">Color:</label>
                    <input class="form-control" type="text" id="color" name="color" th:field="*{color}">
                    <!--            <label th:if="${#fields.hasErrors('color')}" th:errors="*{color}"></label>-->
                </div>
                <div class="form-group col" th:if="*{categoryId eq 1}">
                    <label for="material">Material:</label>
                    <input class="form-control" type="text" id="material" name="material" th:field="*{material}">
                    <!--            <label th:if="${#fields.hasErrors('material')}" th:errors="*{material}"></label>-->
                </div>
                <div class="form-group col" th:if="*{categoryId eq 1 or categoryId eq 3}">
                    <label for="subjectAge">Age:</label>
                    <input class="form-control" type="text" id="subjectAge" name="subjectAge" th:field="*{subjectAge}">
                    <!--            <label th:if="${#fields.hasErrors('subjectAge')}" th:errors="*{subjectAge}"></label>-->
                </div>
            </div>
        </div>
        <hr class="my-4">
        <div class="extra-content container">
            <div class="form-row">
                <div class="form-group col-3">
                    <label for="SKU">SKU:</label>
                    <input class="form-control" type="text" id="SKU" name="SKU" th:field="*{SKU}"
                           th:classappend="${(#fields.hasErrors('SKU')?'is-invalid':'')
                               + (!#fields.hasErrors('SKU') and productForm.isSubmitted() ? 'is-valid':'')}">
                    <label class="invalid-feedback" th:if="${#fields.hasErrors('SKU')}" th:errors="*{SKU}"></label>
                </div>
            </div>
            <div class="form-row">
                <div class="form-group col">
                    <label for="listPrice">List price:</label>
                    <input class="form-control" type="text" id="listPrice" name="listPrice" th:field="*{listPrice}"
                           th:classappend="${(#fields.hasErrors('listPrice')?'is-invalid':'')
                               + (!#fields.hasErrors('listPrice') and productForm.isSubmitted() ? 'is-valid':'')}">
                    <label class="invalid-feedback" th:if="${#fields.hasErrors('listPrice')}" th:errors="*{listPrice}"></label>
                </div>
                <div class="form-group col">
                    <label for="price">price:</label>
                    <input class="form-control" type="text" id="price" name="price" th:field="*{price}"
                           th:classappend="${(#fields.hasErrors('price')?'is-invalid':'')
                               + (!#fields.hasErrors('price') and productForm.isSubmitted() ? 'is-valid':'')}">
                    <label class="invalid-feedback" th:if="${#fields.hasErrors('price')}" th:errors="*{price}"></label>
                </div>
            </div>
            <div class="form-row">
                <div class="form-group col-3">
                    <label for="quantity">quantity:</label>
                    <input class="form-control" type="text" id="quantity" name="quantity" th:field="*{quantity}"
                           th:classappend="${(#fields.hasErrors('quantity')?'is-invalid':'')
                               + (!#fields.hasErrors('quantity') and productForm.isSubmitted() ? 'is-valid':'')}">
                    <label class="invalid-feedback" th:if="${#fields.hasErrors('quantity')}" th:errors="*{quantity}"></label>
                </div>
            </div>
        </div>
        <hr class="my-4">
        <div class="image-content container d-inline-flex flex-wrap">
            <!--                <div class="">-->
            <div class="img-manager">
                <div style="width: 100px; height: 100px">
                    <img id="previous-img-1" th:src="@{'data:image/jpeg;base64,'+${productForm.productImageFormList[0].generateBase64Image()}}"
                         th:unless="${#lists.size(productForm.productImageFormList) eq 0} "/>
                    <img class="add-img-btn" id="add-img-btn1" th:src="@{/images/add-image.png}"
                         th:if="${#lists.size(productForm.productImageFormList) eq 0}">
                    <input class="input-image" id="imageFile1" th:field="*{uploadFiles}" type="file" accept="image/png, image/jpeg"/>
                    <img class="img-thumbnail" id="thumbnail1" alt="Product image preview">
                </div>
                <span>Image 1</span>
                <img class="delete-btn-img" id="delete-btn-img1" th:src="@{/images/trash.png}">
            </div>
            <div class="img-manager">
                <div style="width: 100px; height: 100px">
                    <img id="previous-img-2" th:src="@{'data:image/jpeg;base64,'+${productForm.productImageFormList[1].generateBase64Image()}}"
                         th:unless="${#lists.size(productForm.productImageFormList) < 2}"/>
                    <img class="add-img-btn" id="add-img-btn2" th:src="@{/images/add-image.png}">
                    <input class="input-image" id="imageFile2" th:field="*{uploadFiles}" type="file" accept="image/png, image/jpeg"/>
                    <img class="img-thumbnail" id="thumbnail2" alt="Product image preview">
                </div>
                <span>Image 2</span>
                <img class="delete-btn-img" id="delete-btn-img2" th:src="@{/images/trash.png}">
            </div>
            <div class="img-manager">
                <div style="width: 100px; height: 100px">
                    <img id="previous-img-3" th:src="@{'data:image/jpeg;base64,'+${productForm.productImageFormList[2].generateBase64Image()}}"
                         th:unless="${#lists.size(productForm.productImageFormList) < 3}">
                    <img class="add-img-btn" id="add-img-btn3" th:src="@{/images/add-image.png}">
                    <input class="input-image" id="imageFile3" th:field="*{uploadFiles}" type="file" accept="image/png, image/jpeg"/>
                    <img class="img-thumbnail" id="thumbnail3" alt="Product image preview">
                </div>
                <span>Image 3</span>
                <img class="delete-btn-img" id="delete-btn-img3" th:src="@{/images/trash.png}">
            </div>
            <!--                </div>-->
        </div>
        <input type="hidden" name="vendorId" th:field="*{vendorId}">
        <input type="hidden" name="productId" th:field="*{productId}">
        <input type="hidden" name="createdBy" th:field="*{createdBy}">
        <button type="submit" class="btn btn-primary btn-save">Save product</button>
    </div>
</form>
<script type="text/javascript" th:src="@{/js/vendor/editProduct.js}"></script>
<link rel="stylesheet" href="../../static/css/vendor/editProduct.css" th:href="@{/css/vendor/editProduct.css}" />
<link rel="stylesheet" href="../../static/css/common/productImage.css" th:href="@{/css/common/productImage.css}" />
</body>
</html>